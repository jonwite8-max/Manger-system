{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto">
  <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
  <div class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">๐ ููุญุฉ ุงูุชุญูู</h1>
    <p class="text-gray-600 mt-2">ูุธุฑุฉ ุนุงูุฉ ุนูู ุฅุญุตุงุฆูุงุช ูุฃุฏุงุก ุงููุธุงู</p>
  </div>

  <!-- ุจุทุงูุงุช ุงูุฅุญุตุงุฆูุงุช ุงูุณุฑูุนุฉ -->
  <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
    
    <!-- ุจุทุงูุฉ ุงูุทูุจูุงุช -->
    <div class="card p-6 hover:shadow-lg transition-all duration-300">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">ุฅุฌูุงูู ุงูุทูุจูุงุช</p>
          <p class="text-2xl font-bold text-gray-900 mt-2">{{ total_orders }}</p>
          <div class="flex items-center mt-2">
            <span class="text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full">
              +5% ูุฐุง ุงูุดูุฑ
            </span>
          </div>
        </div>
        <div class="p-3 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full shadow-lg">
          <i class="fas fa-box text-white text-xl"></i>
        </div>
      </div>
      <div class="mt-4 pt-4 border-t border-gray-100">
        <a href="{{ url_for('orders') }}" class="text-blue-600 hover:text-blue-800 text-sm font-medium flex items-center">
          ุนุฑุถ ุฌููุน ุงูุทูุจูุงุช
          <i class="fas fa-arrow-left mr-2 text-xs"></i>
        </a>
      </div>
    </div>

    <!-- ุจุทุงูุฉ ุงูุนูุงู -->
    <div class="card p-6 hover:shadow-lg transition-all duration-300">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">ุฅุฌูุงูู ุงูุนูุงู</p>
          <p class="text-2xl font-bold text-gray-900 mt-2">{{ total_workers }}</p>
          <div class="flex items-center mt-2">
            <span class="text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full">
              +2 ูุฐุง ุงูุดูุฑ
            </span>
          </div>
        </div>
        <div class="p-3 bg-gradient-to-br from-green-500 to-green-600 rounded-full shadow-lg">
          <i class="fas fa-users text-white text-xl"></i>
        </div>
      </div>
      <div class="mt-4 pt-4 border-t border-gray-100">
        <a href="{{ url_for('workers') }}" class="text-green-600 hover:text-green-800 text-sm font-medium flex items-center">
          ุฅุฏุงุฑุฉ ุงูุนูุงู
          <i class="fas fa-arrow-left mr-2 text-xs"></i>
        </a>
      </div>
    </div>

    <!-- ุจุทุงูุฉ ุงูุฏููู -->
    <div class="card p-6 hover:shadow-lg transition-all duration-300">
      <div class="flex items-center justify-between">
        <div>
          <p class="text-sm font-medium text-gray-600">ุงูุฏููู ุงููุณุชุญูุฉ</p>
          <p class="text-2xl font-bold text-gray-900 mt-2">{{ total_debts }}</p>
          <div class="flex items-center mt-2">
            <span class="text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full">
              ุชุญุช ุงููุฑุงุฌุนุฉ
            </span>
          </div>
        </div>
        <div class="p-3 bg-gradient-to-br from-red-500 to-red-600 rounded-full shadow-lg">
          <i class="fas fa-money-bill-wave text-white text-xl"></i>
        </div>
      </div>
      <div class="mt-4 pt-4 border-t border-gray-100">
        <a href="{{ url_for('debts') }}" class="text-red-600 hover:text-red-800 text-sm font-medium flex items-center">
          ุฅุฏุงุฑุฉ ุงูุฏููู
          <i class="fas fa-arrow-left mr-2 text-xs"></i>
        </a>
      </div>
    </div>

    <!-- ุจุทุงูุฉ ุงููุตุงุฑูู ูุงููุดุชุฑูุงุช -->
<div class="stat-card bg-purple-50 border border-purple-200">
    <div class="flex items-center justify-between">
        <div>
            <p class="text-purple-600 text-sm font-medium">ุฅุฌูุงูู ุงููุตุงุฑูู</p>
            <h3 class="text-2xl font-bold text-purple-900 mt-1">{{ total_expenses }}</h3>
        </div>
        <div class="p-3 bg-purple-100 rounded-lg">
            <i class="fas fa-receipt text-purple-600 text-xl"></i>
        </div>
    </div>
    <a href="{{ url_for('expenses') }}" class="text-purple-500 text-xs mt-2 hover:text-purple-700 block">
        ุนุฑุถ ุฌููุน ุงููุตุงุฑูู ูุงููุดุชุฑูุงุช โ
    </a>
</div>

  <!-- ุงูุดุจูุฉ ุงูุฑุฆูุณูุฉ -->
  <div class="grid grid-cols-1 lg:grid-cols-3 gap-8 mb-8">
    
    <!-- ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ -->
    <div class="lg:col-span-2">
      <div class="card p-6">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-xl font-bold text-gray-900">โก ุงูุฅุฌุฑุงุกุงุช ุงูุณุฑูุนุฉ</h3>
          <span class="text-sm text-gray-500">ุงููุตูู ุงูุณุฑูุน ููููุงู ุงูุดุงุฆุนุฉ</span>
        </div>
        
        <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
          <!-- ุฅุถุงูุฉ ุทูุจูุฉ -->
          <a href="{{ url_for('orders') }}" class="group p-4 border-2 border-dashed border-blue-200 rounded-xl hover:border-blue-500 hover:bg-blue-50 transition-all duration-300 text-center">
            <div class="p-3 bg-blue-100 rounded-full inline-block group-hover:bg-blue-200 transition-colors">
              <i class="fas fa-plus text-blue-600 text-lg"></i>
            </div>
            <h4 class="font-semibold text-gray-900 mt-2 group-hover:text-blue-700">ุฅุถุงูุฉ ุทูุจูุฉ</h4>
            <p class="text-sm text-gray-600 mt-1">ุฅูุดุงุก ุทูุจูุฉ ุฌุฏูุฏุฉ ููุนููุงุก</p>
          </a>

          <!-- ุฅุถุงูุฉ ุนุงูู -->
          <a href="{{ url_for('workers') }}" class="group p-4 border-2 border-dashed border-green-200 rounded-xl hover:border-green-500 hover:bg-green-50 transition-all duration-300 text-center">
            <div class="p-3 bg-green-100 rounded-full inline-block group-hover:bg-green-200 transition-colors">
              <i class="fas fa-user-plus text-green-600 text-lg"></i>
            </div>
            <h4 class="font-semibold text-gray-900 mt-2 group-hover:text-green-700">ุฅุถุงูุฉ ุนุงูู</h4>
            <p class="text-sm text-gray-600 mt-1">ุชุณุฌูู ุนุงูู ุฌุฏูุฏ ูู ุงููุธุงู</p>
          </a>

          <!-- ุฅุถุงูุฉ ูุดุชุฑูุงุช -->
          <a href="{{ url_for('purchases') }}" class="group p-4 border-2 border-dashed border-orange-200 rounded-xl hover:border-orange-500 hover:bg-orange-50 transition-all duration-300 text-center">
            <div class="p-3 bg-orange-100 rounded-full inline-block group-hover:bg-orange-200 transition-colors">
              <i class="fas fa-cart-plus text-orange-600 text-lg"></i>
            </div>
            <h4 class="font-semibold text-gray-900 mt-2 group-hover:text-orange-700">ุฅุถุงูุฉ ูุดุชุฑูุงุช</h4>
            <p class="text-sm text-gray-600 mt-1">ุชุณุฌูู ุนูููุฉ ุดุฑุงุก ุฌุฏูุฏุฉ</p>
          </a>

          <!-- ุฅุถุงูุฉ ุฏูู -->
          <a href="{{ url_for('debts') }}" class="group p-4 border-2 border-dashed border-red-200 rounded-xl hover:border-red-500 hover:bg-red-50 transition-all duration-300 text-center">
            <div class="p-3 bg-red-100 rounded-full inline-block group-hover:bg-red-200 transition-colors">
              <i class="fas fa-file-invoice-dollar text-red-600 text-lg"></i>
            </div>
            <h4 class="font-semibold text-gray-900 mt-2 group-hover:text-red-700">ุฅุถุงูุฉ ุฏูู</h4>
            <p class="text-sm text-gray-600 mt-1">ุชุณุฌูู ุฏูู ุฌุฏูุฏ ูู ุงููุธุงู</p>
          </a>

          <!-- ุฅุนุฏุงุฏุงุช -->
          <a href="{{ url_for('settings') }}" class="group p-4 border-2 border-dashed border-gray-200 rounded-xl hover:border-gray-500 hover:bg-gray-50 transition-all duration-300 text-center">
            <div class="p-3 bg-gray-100 rounded-full inline-block group-hover:bg-gray-200 transition-colors">
              <i class="fas fa-cog text-gray-600 text-lg"></i>
            </div>
            <h4 class="font-semibold text-gray-900 mt-2 group-hover:text-gray-700">ุงูุฅุนุฏุงุฏุงุช</h4>
            <p class="text-sm text-gray-600 mt-1">ุฅุฏุงุฑุฉ ุฅุนุฏุงุฏุงุช ุงููุธุงู</p>
          </a>

          <!-- ุงูุชูุงุฑูุฑ -->
          <a href="{{ url_for('stats') }}" class="group p-4 border-2 border-dashed border-purple-200 rounded-xl hover:border-purple-500 hover:bg-purple-50 transition-all duration-300 text-center">
            <div class="p-3 bg-purple-100 rounded-full inline-block group-hover:bg-purple-200 transition-colors">
              <i class="fas fa-chart-bar text-purple-600 text-lg"></i>
            </div>
            <h4 class="font-semibold text-gray-900 mt-2 group-hover:text-purple-700">ุงูุชูุงุฑูุฑ</h4>
            <p class="text-sm text-gray-600 mt-1">ุนุฑุถ ุงูุชูุงุฑูุฑ ูุงูุฅุญุตุงุฆูุงุช</p>
          </a>
        </div>
      </div>
    </div>

    <!-- ุงููุดุงุท ุงูุญุฏูุซ -->
    <div class="lg:col-span-1">
      <div class="card p-6 h-full">
        <div class="flex items-center justify-between mb-6">
          <h3 class="text-xl font-bold text-gray-900">๐ ุงููุดุงุท ุงูุญุฏูุซ</h3>
          <span class="text-sm text-gray-500">ุขุฎุฑ ุงูุชุญุฏูุซุงุช</span>
        </div>
        
        <div class="space-y-4 max-h-96 overflow-y-auto">
          <!-- ูุดุงุท 1 -->
          <div class="flex items-start p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
            <div class="p-2 bg-blue-100 rounded-full ml-3 mt-1">
              <i class="fas fa-box text-blue-600 text-sm"></i>
            </div>
            <div class="flex-1">
              <p class="font-medium text-gray-900">ุทูุจูุฉ ุฌุฏูุฏุฉ #1256</p>
              <p class="text-sm text-gray-600">ุชู ุฅูุดุงุก ุทูุจูุฉ ุฌุฏูุฏุฉ ููุนููู ูุญูุฏ ุฃุญูุฏ</p>
              <div class="flex items-center justify-between mt-2">
                <span class="text-xs text-blue-600 bg-blue-100 px-2 py-1 rounded-full">ุฌุฏูุฏ</span>
                <span class="text-xs text-gray-500">ููุฐ 5 ุฏูุงุฆู</span>
              </div>
            </div>
          </div>

          <!-- ูุดุงุท 2 -->
          <div class="flex items-start p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
            <div class="p-2 bg-green-100 rounded-full ml-3 mt-1">
              <i class="fas fa-users text-green-600 text-sm"></i>
            </div>
            <div class="flex-1">
              <p class="font-medium text-gray-900">ุนุงูู ุฌุฏูุฏ</p>
              <p class="text-sm text-gray-600">ุชู ุฅุถุงูุฉ ุงูุนุงูู ุฃุญูุฏ ูุญููุฏ ุฅูู ุงููุธุงู</p>
              <div class="flex items-center justify-between mt-2">
                <span class="text-xs text-green-600 bg-green-100 px-2 py-1 rounded-full">ููุธู</span>
                <span class="text-xs text-gray-500">ููุฐ ุณุงุนุฉ</span>
              </div>
            </div>
          </div>

          <!-- ูุดุงุท 3 -->
          <div class="flex items-start p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
            <div class="p-2 bg-red-100 rounded-full ml-3 mt-1">
              <i class="fas fa-money-bill-wave text-red-600 text-sm"></i>
            </div>
            <div class="flex-1">
              <p class="font-medium text-gray-900">ุฏูุน ุฏูู</p>
              <p class="text-sm text-gray-600">ุชู ุฏูุน ุฏูู ุจูููุฉ 75,000 ุฏุฌ ููุนููู ูุงุทูุฉ</p>
              <div class="flex items-center justify-between mt-2">
                <span class="text-xs text-red-600 bg-red-100 px-2 py-1 rounded-full">ูุฏููุน</span>
                <span class="text-xs text-gray-500">ููุฐ ููููู</span>
              </div>
            </div>
          </div>

          <!-- ูุดุงุท 4 -->
          <div class="flex items-start p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
            <div class="p-2 bg-purple-100 rounded-full ml-3 mt-1">
              <i class="fas fa-cart-shopping text-purple-600 text-sm"></i>
            </div>
            <div class="flex-1">
              <p class="font-medium text-gray-900">ุดุฑุงุก ุฌุฏูุฏ</p>
              <p class="text-sm text-gray-600">ุชู ุชุณุฌูู ุนูููุฉ ุดุฑุงุก ูู ุงูููุฑุฏ ุงูุชููู</p>
              <div class="flex items-center justify-between mt-2">
                <span class="text-xs text-purple-600 bg-purple-100 px-2 py-1 rounded-full">ูุดุชุฑูุงุช</span>
                <span class="text-xs text-gray-500">ููุฐ 3 ุฃูุงู</span>
              </div>
            </div>
          </div>

          <!-- ูุดุงุท 5 -->
          <div class="flex items-start p-3 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors">
            <div class="p-2 bg-orange-100 rounded-full ml-3 mt-1">
              <i class="fas fa-truck text-orange-600 text-sm"></i>
            </div>
            <div class="flex-1">
              <p class="font-medium text-gray-900">ุดุญู ุฌุฏูุฏ</p>
              <p class="text-sm text-gray-600">ุชู ุชุณุฌูู ุนูููุฉ ุดุญู ุฅูู ููุงูุฉ ุงูุฌุฒุงุฆุฑ</p>
              <div class="flex items-center justify-between mt-2">
                <span class="text-xs text-orange-600 bg-orange-100 px-2 py-1 rounded-full">ููู</span>
                <span class="text-xs text-gray-500">ููุฐ 4 ุฃูุงู</span>
              </div>
            </div>
          </div>
        </div>

        <div class="mt-6 pt-4 border-t border-gray-100">
          <a href="{{ url_for('stats') }}" class="text-gray-600 hover:text-gray-800 text-sm font-medium flex items-center justify-center">
            ุนุฑุถ ุณุฌู ุงููุดุงุท ุงููุงูู
            <i class="fas fa-arrow-left mr-2 text-xs"></i>
          </a>
        </div>
      </div>
    </div>
  </div>

  <!-- ูุณู ุงูุชูุงุฑูุฑ ุงูุณุฑูุนุฉ -->
  <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
    
    <!-- ููุฎุต ุงูุฃุฏุงุก -->
    <div class="card p-6">
      <h3 class="text-xl font-bold text-gray-900 mb-6">๐ ููุฎุต ุงูุฃุฏุงุก</h3>
      <div class="grid grid-cols-2 gap-4">
        <div class="text-center p-4 bg-blue-50 rounded-lg">
          <div class="text-2xl font-bold text-blue-600">{{ total_orders }}</div>
          <div class="text-sm text-gray-600 mt-1">ุทูุจูุฉ</div>
        </div>
        <div class="text-center p-4 bg-green-50 rounded-lg">
          <div class="text-2xl font-bold text-green-600">{{ total_workers }}</div>
          <div class="text-sm text-gray-600 mt-1">ุนุงูู</div>
        </div>
        <div class="text-center p-4 bg-red-50 rounded-lg">
          <div class="text-2xl font-bold text-red-600">{{ total_debts }}</div>
          <div class="text-sm text-gray-600 mt-1">ุฏูู</div>
        </div>
        <div class="text-center p-4 bg-purple-50 rounded-lg">
          <div class="text-2xl font-bold text-purple-600">{{ total_purchases }}</div>
          <div class="text-sm text-gray-600 mt-1">ุดุฑุงุก</div>
        </div>
      </div>
    </div>

    <!-- ุงูุฅุดุนุงุฑุงุช ุงููููุฉ -->
    <div class="card p-6">
      <h3 class="text-xl font-bold text-gray-900 mb-6">๐ ุฅุดุนุงุฑุงุช ูููุฉ</h3>
      <div class="space-y-3">
        <div class="flex items-center p-3 bg-yellow-50 border border-yellow-200 rounded-lg">
          <i class="fas fa-exclamation-triangle text-yellow-600 ml-3"></i>
          <div>
            <p class="font-medium text-yellow-800">ุฏููู ูุณุชุญูุฉ</p>
            <p class="text-sm text-yellow-700">ููุงู 5 ุฏููู ุชุญุชุงุฌ ูููุฑุงุฌุนุฉ</p>
          </div>
        </div>
        <div class="flex items-center p-3 bg-blue-50 border border-blue-200 rounded-lg">
          <i class="fas fa-info-circle text-blue-600 ml-3"></i>
          <div>
            <p class="font-medium text-blue-800">ุชุญุฏูุซ ุงููุธุงู</p>
            <p class="text-sm text-blue-700">ุงูุชุญุฏูุซ ุงูุฃุฎูุฑ: {{ now.strftime('%Y-%m-%d') if now else '2024-01-01' }}</p>
          </div>
        </div>
        <div class="flex items-center p-3 bg-green-50 border border-green-200 rounded-lg">
          <i class="fas fa-check-circle text-green-600 ml-3"></i>
          <div>
            <p class="font-medium text-green-800">ุงููุธุงู ูุนูู ุจุดูู ุทุจูุนู</p>
            <p class="text-sm text-green-700">ุฌููุน ุงูุฎุฏูุงุช ุชุนูู ุจููุงุกุฉ</p>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- ุณุชุงูู ุฅุถุงูู -->
<style>
  .card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border: 1px solid #e2e8f0;
    border-radius: 16px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    transition: all 0.3s ease;
  }
  
  .card:hover {
    box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04);
    transform: translateY(-2px);
  }
  
  .gradient-bg {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
  }
  
  /* ุชุฎุตูุต ุดุฑูุท ุงูุชูุฑูุฑ ูููุดุงุท ุงูุญุฏูุซ */
  .max-h-96::-webkit-scrollbar {
    width: 4px;
  }
  
  .max-h-96::-webkit-scrollbar-track {
    background: #f1f5f9;
    border-radius: 10px;
  }
  
  .max-h-96::-webkit-scrollbar-thumb {
    background: #cbd5e1;
    border-radius: 10px;
  }
  
  .max-h-96::-webkit-scrollbar-thumb:hover {
    background: #94a3b8;
  }
</style>

<script>
  // ุชุญุฏูุซ ุงูููุช ุงูุญู
  function updateLiveTime() {
    const now = new Date();
    const options = { 
      weekday: 'long', 
      year: 'numeric', 
      month: 'long', 
      day: 'numeric',
      hour: '2-digit',
      minute: '2-digit',
      second: '2-digit',
      timeZone: 'Africa/Algiers'
    };
    
    const timeString = now.toLocaleDateString('ar-EG', options);
    const timeElement = document.getElementById('live-time');
    if (timeElement) {
      timeElement.textContent = timeString;
    }
  }
  
  // ุชุญุฏูุซ ุงูููุช ูู ุซุงููุฉ
  setInterval(updateLiveTime, 1000);
  updateLiveTime(); // ุงูุชุดุบูู ุงูุฃููู
  
  // ุชุฃุซูุฑุงุช ุนูุฏ ุงูุชูุฑูุฑ
  document.addEventListener('DOMContentLoaded', function() {
    const cards = document.querySelectorAll('.card');
    
    const observer = new IntersectionObserver((entries) => {
      entries.forEach(entry => {
        if (entry.isIntersecting) {
          entry.target.style.opacity = '1';
          entry.target.style.transform = 'translateY(0)';
        }
      });
    }, { threshold: 0.1 });
    
    cards.forEach(card => {
      card.style.opacity = '0';
      card.style.transform = 'translateY(20px)';
      card.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
      observer.observe(card);
    });
  });
</script>
{% endblock %}