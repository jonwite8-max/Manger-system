{% extends "base.html" %}

{% block content %}
<div class="max-w-7xl mx-auto">
  <!-- ุฑุฃุณ ุงูุตูุญุฉ -->
  <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-4 mb-8">
    <div>
      <h1 class="text-3xl font-bold text-gray-900">โ๏ธ ูุฑูุฒ ุงูุชุญูู ูุงูุฅุนุฏุงุฏุงุช</h1>
      <p class="text-gray-600 mt-2">ุฅุฏุงุฑุฉ ูุงููุฉ ูููุธุงู ูุงููุณุชุฎุฏููู ูุงูุฅุนุฏุงุฏุงุช</p>
    </div>
    
    <div class="flex items-center gap-4">
      <div class="bg-gradient-to-r from-purple-500 to-purple-600 text-white rounded-xl px-6 py-3 shadow-lg">
        <div class="text-sm font-medium">ุงููุณุชุฎุฏููู ุงููุดุทูู</div>
        <div class="text-2xl font-bold mt-1">{{ users|length }}</div>
      </div>
    </div>
  </div>

  <!-- ุชุจููุจุงุช ุงูุฅุนุฏุงุฏุงุช -->
  <div class="card p-2 mb-8">
    <div class="flex flex-wrap border-b">
      <button onclick="showTab('users')" 
              class="tab-btn px-6 py-3 border-b-2 font-medium text-sm transition-colors"
              data-tab="users">
        <i class="fas fa-users mr-2"></i>
        ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
      </button>
      <button onclick="showTab('system')" 
              class="tab-btn px-6 py-3 border-b-2 font-medium text-sm transition-colors"
              data-tab="system">
        <i class="fas fa-cog mr-2"></i>
        ุฅุนุฏุงุฏุงุช ุงููุธุงู
      </button>
      <button onclick="showTab('statuses')" 
              class="tab-btn px-6 py-3 border-b-2 font-medium text-sm transition-colors"
              data-tab="statuses">
        <i class="fas fa-tags mr-2"></i>
        ุญุงูุงุช ุงูุทูุจูุงุช
      </button>
      <button onclick="showTab('suppliers')" 
              class="tab-btn px-6 py-3 border-b-2 font-medium text-sm transition-colors"
              data-tab="suppliers">
        <i class="fas fa-truck mr-2"></i>
        ุฅุฏุงุฑุฉ ุงูููุฑุฏูู
      </button>
      <button onclick="showTab('products')" 
              class="tab-btn px-6 py-3 border-b-2 font-medium text-sm transition-colors"
              data-tab="products">
        <i class="fas fa-box mr-2"></i>
        ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช
      </button>
      <button onclick="showTab('permissions')" 
              class="tab-btn px-6 py-3 border-b-2 font-medium text-sm transition-colors"
              data-tab="permissions">
        <i class="fas fa-shield-alt mr-2"></i>
        ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ
      </button>
    </div>
  </div>

  <!-- ูุญุชูู ุงูุชุจููุจุงุช -->
  <div id="tabContent">
    
    <!-- ุชุจููุจ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู -->
    <div id="users-tab" class="tab-content active">
      <div class="flex justify-between items-center mb-6">
        <h3 class="text-xl font-bold text-gray-900">๐ฅ ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู</h3>
        <button onclick="showModal('addUserModal')" class="btn-success flex items-center gap-2">
          <i class="fas fa-user-plus"></i>
          ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ
        </button>
      </div>

      <div class="grid grid-cols-1 md:grid-cols-4 gap-4 mb-6">
        <div class="card p-4 text-center">
          <div class="text-2xl font-bold text-blue-600">{{ users|length }}</div>
          <div class="text-sm text-gray-600 mt-1">ุฅุฌูุงูู ุงููุณุชุฎุฏููู</div>
        </div>
        <div class="card p-4 text-center">
          <div class="text-2xl font-bold text-green-600">{{ users|selectattr('is_active', 'equalto', true)|list|length }}</div>
          <div class="text-sm text-gray-600 mt-1">ูุณุชุฎุฏููู ูุดุทูู</div>
        </div>
        <div class="card p-4 text-center">
          <div class="text-2xl font-bold text-purple-600">{{ users|selectattr('role', 'equalto', 'admin')|list|length }}</div>
          <div class="text-sm text-gray-600 mt-1">ูุฏูุฑูู</div>
        </div>
        <div class="card p-4 text-center">
          <div class="text-2xl font-bold text-orange-600">{{ users|selectattr('role', 'equalto', 'user')|list|length }}</div>
          <div class="text-sm text-gray-600 mt-1">ูุณุชุฎุฏููู ุนุงุฏููู</div>
        </div>
      </div>

      <div class="table-container">
        <table class="w-full">
          <thead class="table-header">
            <tr>
              <th class="p-4 text-right">#</th>
              <th class="p-4 text-right">ุงููุณุชุฎุฏู</th>
              <th class="p-4 text-right">ูุนูููุงุช ุงูุงุชุตุงู</th>
              <th class="p-4 text-right">ุงูุฏูุฑ ูุงูุตูุงุญูุงุช</th>
              <th class="p-4 text-right">ุงูุญุงูุฉ</th>
              <th class="p-4 text-right">ุขุฎุฑ ูุดุงุท</th>
              <th class="p-4 text-right">ุงูุนูููุงุช</th>
            </tr>
          </thead>
          <tbody>
            {% for user in users %}
            <tr class="hover:bg-gray-50 transition-colors border-b border-gray-100">
              <td class="p-4">
                <div class="font-mono text-sm text-gray-500">#{{ user.id }}</div>
              </td>
              
              <td class="p-4">
                <div class="flex items-center gap-3">
                  <div class="w-10 h-10 bg-gradient-to-r from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold">
                    {{ user.username[0] }}
                  </div>
                  <div>
                    <div class="font-semibold text-gray-900">{{ user.username }}</div>
                    <div class="text-xs text-gray-500">{{ user.full_name or "ุจุฏูู ุงุณู" }}</div>
                  </div>
                </div>
              </td>
              
              <td class="p-4">
                <div class="space-y-1 text-sm">
                  <div class="text-gray-600">{{ user.email or "ุจุฏูู ุจุฑูุฏ" }}</div>
                  <div class="text-gray-500">{{ user.phone or "ุจุฏูู ูุงุชู" }}</div>
                </div>
              </td>
              
              <td class="p-4">
                <div class="space-y-2">
                  <span class="badge {% if user.role == 'admin' %}badge-danger{% else %}badge-info{% endif %}">
                    {{ user.role }}
                  </span>
                  <div class="text-xs text-gray-500">
                    {% if user.permissions %}
                    {{ user.permissions|length }} ุตูุงุญูุฉ
                    {% else %}
                    ูุง ุชูุฌุฏ ุตูุงุญูุงุช ูุญุฏุฏุฉ
                    {% endif %}
                  </div>
                </div>
              </td>
              
              <td class="p-4">
                {% if user.is_active %}
                <span class="badge badge-success">ูุดุท</span>
                {% else %}
                <span class="badge badge-danger">ุบูุฑ ูุดุท</span>
                {% endif %}
              </td>
              
              <td class="p-4">
                <div class="text-sm text-gray-600">{{ user.last_login.strftime('%Y-%m-%d %H:%M') if user.last_login else "ูู ูุณุฌู ุฏุฎูู" }}</div>
              </td>
              
              <td class="p-4">
  <div class="flex flex-col gap-2">
    <!-- ุฒุฑ ุงูุชุนุฏูู -->
    <button onclick="editUser({{ user.id }})" 
            class="flex items-center gap-2 text-blue-600 hover:text-blue-800 p-2 rounded-lg hover:bg-blue-50 transition-colors text-sm">
      <i class="fas fa-edit text-xs"></i>
      ุชุนุฏูู
    </button>
    
    <!-- ุฒุฑ ุฅููุงู/ุชูุนูู -->
    {% if user.username != session.user %}
    <a href="{{ url_for('toggle_user_status', user_id=user.id) }}" 
       onclick="return confirm('ูู ุชุฑูุฏ {{ 'ุฅููุงู' if user.is_active else 'ุชูุนูู' }} ูุฐุง ุงููุณุชุฎุฏูุ')"
       class="flex items-center gap-2 {% if user.is_active %}text-orange-600 hover:text-orange-800{% else %}text-green-600 hover:text-green-800{% endif %} p-2 rounded-lg hover:bg-orange-50 transition-colors text-sm">
      <i class="fas {% if user.is_active %}fa-pause{% else %}fa-play{% endif %} text-xs"></i>
      {{ "ุฅููุงู" if user.is_active else "ุชูุนูู" }}
    </a>
    
    <!-- ุฒุฑ ุงูุญุฐู -->
    <a href="{{ url_for('delete_user', user_id=user.id) }}" 
       onclick="return confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุณุชุฎุฏูุ')"
       class="flex items-center gap-2 text-red-600 hover:text-red-800 p-2 rounded-lg hover:bg-red-50 transition-colors text-sm">
      <i class="fas fa-trash text-xs"></i>
      ุญุฐู
    </a>
    {% else %}
    <span class="text-gray-400 text-sm p-2">ูุง ูููู ุชุนุฏูู ุญุณุงุจู</span>
    {% endif %}
  </div>
</td>
            {% endfor %}
          </tbody>
        </table>
      </div>
      <!-- ููุฏุงู ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ -->
<div id="addUserModal" class="modal">
  <div class="modal-content w-full max-w-md">
    <div class="p-6">
      <div class="flex items-center justify-between mb-6">
        <h3 class="text-xl font-bold text-gray-900">๐ค ุฅุถุงูุฉ ูุณุชุฎุฏู ุฌุฏูุฏ</h3>
        <button onclick="hideModal('addUserModal')" class="text-gray-400 hover:text-gray-600 text-xl">
          <i class="fas fa-times"></i>
        </button>
      </div>

      <form method="POST" action="{{ url_for('settings') }}" class="space-y-4">
        <input type="hidden" name="action" value="add_user">
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ุงุณู ุงููุณุชุฎุฏู *</label>
          <input type="text" name="username" required class="form-input" placeholder="ุงุณู ุงููุณุชุฎุฏู">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</label>
          <input type="email" name="email" class="form-input" placeholder="email@example.com">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ูููุฉ ุงููุฑูุฑ *</label>
          <input type="password" name="password" required class="form-input" placeholder="ูููุฉ ุงููุฑูุฑ">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุงุณู ุงููุงูู</label>
          <input type="text" name="full_name" class="form-input" placeholder="ุงูุงุณู ุงููุงูู">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ุฑูู ุงููุงุชู</label>
          <input type="tel" name="phone" class="form-input" placeholder="+213 XXX XX XX XX">
        </div>
        
        <div>
          <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุฏูุฑ</label>
          <select name="role" class="form-select">
            <option value="user">ูุณุชุฎุฏู ุนุงุฏู</option>
            <option value="manager">ูุฏูุฑ</option>
            <option value="admin">ูุฏูุฑ ูุธุงู</option>
          </select>
        </div>

        <div class="flex gap-3 pt-4">
          <button type="button" onclick="hideModal('addUserModal')" class="flex-1 px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50 transition-colors">
            ุฅูุบุงุก
          </button>
          <button type="submit" class="flex-1 btn-success">
            <i class="fas fa-save ml-2"></i>
            ุญูุธ ุงููุณุชุฎุฏู
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
    </div>

    <!-- ุชุจููุจ ุฅุนุฏุงุฏุงุช ุงููุธุงู -->
    <div id="system-tab" class="tab-content">
      <div class="grid grid-cols-1 lg:grid-cols-2 gap-8">
        
        <!-- ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ -->
        <div class="card p-6">
          <h3 class="text-xl font-bold text-gray-900 mb-6">๐ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ</h3>
          
          <form method="POST" action="{{ url_for('update_system_settings') }}" class="space-y-6">
            <input type="hidden" name="action" value="system_settings">
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุงุณู ุงูุดุฑูุฉ</label>
                <input type="text" name="company_name" value="{{ settings.company_name }}" class="form-input" placeholder="ุงุณู ุงูุดุฑูุฉ ุฃู ุงููุคุณุณุฉ">
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุดุนุงุฑ</label>
                <input type="file" name="logo" class="form-input" accept="image/*">
                {% if settings.logo %}
                <div class="mt-2">
                  <img src="{{ settings.logo }}" alt="ุดุนุงุฑ ุงูุดุฑูุฉ" class="h-16 rounded">
                </div>
                {% endif %}
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุนููุฉ</label>
                <select name="currency" class="form-select">
                  <option value="DZD" {% if settings.currency == 'DZD' %}selected{% endif %}>ุฏููุงุฑ ุฌุฒุงุฆุฑู (DZD)</option>
                  <option value="USD" {% if settings.currency == 'USD' %}selected{% endif %}>ุฏููุงุฑ ุฃูุฑููู (USD)</option>
                  <option value="EUR" {% if settings.currency == 'EUR' %}selected{% endif %}>ููุฑู (EUR)</option>
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุงููุบุฉ</label>
                <select name="language" class="form-select">
                  <option value="ar" {% if settings.language == 'ar' %}selected{% endif %}>ุงูุนุฑุจูุฉ</option>
                  <option value="en" {% if settings.language == 'en' %}selected{% endif %}>English</option>
                  <option value="fr" {% if settings.language == 'fr' %}selected{% endif %}>Franรงais</option>
                </select>
              </div>
            </div>
            
            <button type="submit" class="btn-primary w-full">
              <i class="fas fa-save ml-2"></i>
              ุญูุธ ุงูุฅุนุฏุงุฏุงุช ุงูุนุงูุฉ
            </button>
          </form>
        </div>

        <!-- ุฅุนุฏุงุฏุงุช ุงูุฃูุงู -->
        <div class="card p-6">
          <h3 class="text-xl font-bold text-gray-900 mb-6">๐ ุฅุนุฏุงุฏุงุช ุงูุฃูุงู</h3>
          
          <form method="POST" action="{{ url_for('update_security_settings') }}" class="space-y-6">
            <input type="hidden" name="action" value="security_settings">
            
            <div class="space-y-4">
              <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <div class="font-medium text-gray-900">ุชูุนูู ุงูุชุญูู ุจุฎุทูุชูู</div>
                  <div class="text-sm text-gray-600">ุฒูุงุฏุฉ ุฃูุงู ุญุณุงุจุงุช ุงููุณุชุฎุฏููู</div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" name="two_factor" class="sr-only peer" {% if settings.two_factor %}checked{% endif %}>
                  <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
              </div>
              
              <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <div class="font-medium text-gray-900">ุชุณุฌูู ูุดุงุท ุงููุณุชุฎุฏููู</div>
                  <div class="text-sm text-gray-600">ุชุณุฌูู ุฌููุน ุนูููุงุช ุงูุฏุฎูู ูุงููุดุงุทุงุช</div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" name="activity_logging" class="sr-only peer" {% if settings.activity_logging %}checked{% endif %}>
                  <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ูุฏุฉ ุงูุชูุงุก ุงูุฌูุณุฉ (ุฏูุงุฆู)</label>
                <input type="number" name="session_timeout" value="{{ settings.session_timeout }}" class="form-input" min="5" max="1440">
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ููุฉ ูููุฉ ุงููุฑูุฑ</label>
                <select name="password_strength" class="form-select">
                  <option value="low" {% if settings.password_strength == 'low' %}selected{% endif %}>ููุฎูุถุฉ (6 ุฃุญุฑู)</option>
                  <option value="medium" {% if settings.password_strength == 'medium' %}selected{% endif %}>ูุชูุณุทุฉ (8 ุฃุญุฑู + ุฃุฑูุงู)</option>
                  <option value="high" {% if settings.password_strength == 'high' %}selected{% endif %}>ุนุงููุฉ (10 ุฃุญุฑู + ุฃุฑูุงู + ุฑููุฒ)</option>
                </select>
              </div>
            </div>
            
            <button type="submit" class="btn-primary w-full">
              <i class="fas fa-shield-alt ml-2"></i>
              ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฃูุงู
            </button>
          </form>
        </div>

        <!-- ุฅุนุฏุงุฏุงุช ุงููุงุฌูุฉ -->
        <div class="card p-6">
          <h3 class="text-xl font-bold text-gray-900 mb-6">๐จ ุฅุนุฏุงุฏุงุช ุงููุงุฌูุฉ</h3>
          
          <form method="POST" action="{{ url_for('update_ui_settings') }}" class="space-y-6">
            <input type="hidden" name="action" value="ui_settings">
            
            <div class="space-y-4">
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุงูุณูุฉ</label>
                <select name="theme" class="form-select" onchange="previewTheme(this.value)">
                  <option value="light" {% if settings.theme == 'light' %}selected{% endif %}>ูุงุชุญุฉ</option>
                  <option value="dark" {% if settings.theme == 'dark' %}selected{% endif %}>ุฏุงููุฉ</option>
                  <option value="auto" {% if settings.theme == 'auto' %}selected{% endif %}>ุชููุงุฆูุฉ</option>
                </select>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุงูููู ุงูุฃุณุงุณู</label>
                <div class="flex gap-2">
                  <input type="color" name="primary_color" value="{{ settings.primary_color }}" class="w-12 h-12 rounded cursor-pointer">
                  <input type="text" name="primary_color_hex" value="{{ settings.primary_color }}" class="form-input flex-1" placeholder="#3B82F6">
                </div>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุนุฏุฏ ุงูุตููู ูู ุงูุฌุฏุงูู</label>
                <select name="rows_per_page" class="form-select">
                  <option value="10" {% if settings.rows_per_page == 10 %}selected{% endif %}>10 ุตููู</option>
                  <option value="25" {% if settings.rows_per_page == 25 %}selected{% endif %}>25 ุตู</option>
                  <option value="50" {% if settings.rows_per_page == 50 %}selected{% endif %}>50 ุตู</option>
                  <option value="100" {% if settings.rows_per_page == 100 %}selected{% endif %}>100 ุตู</option>
                </select>
              </div>
              
              <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <div class="font-medium text-gray-900">ูุถุน ุงูุถุบุท</div>
                  <div class="text-sm text-gray-600">ุฅุฎูุงุก ุงูููุงุฆู ุงูุฌุงูุจูุฉ</div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" name="compact_mode" class="sr-only peer" {% if settings.compact_mode %}checked{% endif %}>
                  <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
              </div>
            </div>
            
            <button type="submit" class="btn-primary w-full">
              <i class="fas fa-palette ml-2"></i>
              ุญูุธ ุฅุนุฏุงุฏุงุช ุงููุงุฌูุฉ
            </button>
          </form>
        </div>

        <!-- ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช -->
        <div class="card p-6">
          <h3 class="text-xl font-bold text-gray-900 mb-6">๐ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช</h3>
          
          <form method="POST" action="{{ url_for('update_notification_settings') }}" class="space-y-6">
            <input type="hidden" name="action" value="notification_settings">
            
            <div class="space-y-4">
              <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <div class="font-medium text-gray-900">ุฅุดุนุงุฑุงุช ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</div>
                  <div class="text-sm text-gray-600">ุฅุฑุณุงู ุฅุดุนุงุฑุงุช ุนุจุฑ ุงูุจุฑูุฏ ุงูุฅููุชุฑููู</div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" name="email_notifications" class="sr-only peer" {% if settings.email_notifications %}checked{% endif %}>
                  <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
              </div>
              
              <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <div class="font-medium text-gray-900">ุฅุดุนุงุฑุงุช ุงูุฏูุน</div>
                  <div class="text-sm text-gray-600">ุฅุดุนุงุฑุงุช ุจููุงุนูุฏ ุงูุฏูุน ูุงูุฏููู</div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" name="payment_notifications" class="sr-only peer" {% if settings.payment_notifications %}checked{% endif %}>
                  <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
              </div>
              
              <div class="flex items-center justify-between p-4 bg-gray-50 rounded-lg">
                <div>
                  <div class="font-medium text-gray-900">ุฅุดุนุงุฑุงุช ุงููุฎุฒูู</div>
                  <div class="text-sm text-gray-600">ุชูุจููุงุช ุจููุงุฏ ุงูููุชุฌุงุช</div>
                </div>
                <label class="relative inline-flex items-center cursor-pointer">
                  <input type="checkbox" name="inventory_notifications" class="sr-only peer" {% if settings.inventory_notifications %}checked{% endif %}>
                  <div class="w-11 h-6 bg-gray-200 peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"></div>
                </label>
              </div>
              
              <div>
                <label class="block text-sm font-medium text-gray-700 mb-2">ุชูููุช ุงูุฅุดุนุงุฑุงุช</label>
                <select name="notification_time" class="form-select">
                  <option value="instant" {% if settings.notification_time == 'instant' %}selected{% endif %}>ููุฑู</option>
                  <option value="daily" {% if settings.notification_time == 'daily' %}selected{% endif %}>ูููู</option>
                  <option value="weekly" {% if settings.notification_time == 'weekly' %}selected{% endif %}>ุฃุณุจูุนู</option>
                </select>
              </div>
            </div>
            
            <button type="submit" class="btn-primary w-full">
              <i class="fas fa-bell ml-2"></i>
              ุญูุธ ุฅุนุฏุงุฏุงุช ุงูุฅุดุนุงุฑุงุช
            </button>
          </form>
        </div>
      </div>
    </div>

    <!-- ุชุจููุจ ุญุงูุงุช ุงูุทูุจูุงุช (ุงููุญุชูู ุงูุฃุตูู) -->
    <div id="statuses-tab" class="tab-content">
      <div class="mb-6">
        <h3 class="text-xl font-bold text-gray-900">๐ท๏ธ ุฅุฏุงุฑุฉ ุญุงูุงุช ุงูุทูุจูุงุช</h3>
        <p class="text-gray-600 mt-2">ุฅุถุงูุฉ ูุชุนุฏูู ุญุงูุงุช ุงูุทูุจูุงุช ูู ุงููุธุงู</p>
      </div>

      <div class="card p-6 mb-6">
        <h4 class="font-medium mb-4">ุฅุถุงูุฉ ุญุงูุฉ ุฌุฏูุฏุฉ</h4>
        <form method="POST" class="flex gap-2">
          <input name="name" placeholder="ุงุณู ุงูุญุงูุฉ (ูุซุงู: ููุฏ ุงูุชูููุฐ)" required class="form-input flex-1">
          <input name="color" type="color" value="#FFC107" class="w-16 h-12 rounded cursor-pointer">
          <input type="hidden" name="action" value="add_status">
          <button class="btn-warning">ุฅุถุงูุฉ ุญุงูุฉ</button>
        </form>
      </div>

      <div class="table-container">
        <table class="w-full">
          <thead class="table-header">
            <tr>
              <th class="p-3">#</th>
              <th class="p-3">ุงูุงุณู</th>
              <th class="p-3">ุงูููู</th>
              <th class="p-3">ุนุฏุฏ ุงูุทูุจูุงุช</th>
              <th class="p-3">ุงูุฅุฌุฑุงุกุงุช</th>
            </tr>
          </thead>
          <tbody>
            {% for s in statuses %}
            <tr class="border-t">
              <td class="p-3">{{ s.id }}</td>
              <td class="p-3">{{ s.name }}</td>
              <td class="p-3">
                <span class="inline-block px-3 py-1 rounded-full text-white font-semibold" style="background:{{ s.color }}">
                  {{ s.color }}
                </span>
              </td>
              <td class="p-3 text-center">{{ s.orders|length }}</td>
              <td class="p-3">
                <form method="POST" action="{{ url_for('edit_status', id=s.id) }}" class="flex gap-2 items-center">
                  <input name="name" value="{{ s.name }}" required class="form-input text-sm">
                  <input name="color" value="{{ s.color }}" type="color" class="w-8 h-8 rounded cursor-pointer">
                  <button class="btn-warning text-sm">ุญูุธ</button>
                </form>
                <a href="{{ url_for('delete_status', id=s.id) }}" onclick="return confirm('ุญุฐู ุงูุญุงูุฉุ')" class="btn-danger text-sm mt-2 inline-block">ุญุฐู</a>
              </td>
            </tr>
            {% endfor %}
          </tbody>
        </table>
      </div>
    </div>

    <!-- ุชุจููุจ ุฅุฏุงุฑุฉ ุงูููุฑุฏูู -->
    <div id="suppliers-tab" class="tab-content">
      <!-- ูุญุชูู ุฅุฏุงุฑุฉ ุงูููุฑุฏูู -->
    </div>

    <!-- ุชุจููุจ ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช -->
    <div id="products-tab" class="tab-content">
      <!-- ูุญุชูู ุฅุฏุงุฑุฉ ุงูููุชุฌุงุช -->
    </div>

    <!-- ุชุจููุจ ุงูุตูุงุญูุงุช ูุงูุฃุฏูุงุฑ -->
    <div id="permissions-tab" class="tab-content">
      <!-- ูุญุชูู ุงูุตูุงุญูุงุช -->
    </div>
  </div>
</div>


<script>
// ุฅุฏุงุฑุฉ ุงูุชุจููุจุงุช
function showTab(tabName) {
  // ุฅุฎูุงุก ุฌููุน ุงููุญุชููุงุช
  document.querySelectorAll('.tab-content').forEach(tab => {
    tab.classList.remove('active');
  });
  
  // ุฅุฒุงูุฉ ุงููุดุท ูู ุฌููุน ุงูุฃุฒุฑุงุฑ
  document.querySelectorAll('.tab-btn').forEach(btn => {
    btn.classList.remove('border-blue-500', 'text-blue-600');
    btn.classList.add('border-transparent', 'text-gray-500');
  });
  
  // ุฅุธูุงุฑ ุงููุญุชูู ุงููุทููุจ
  document.getElementById(tabName + '-tab').classList.add('active');
  
  // ุชูุนูู ุงูุฒุฑ ุงููุทููุจ
  document.querySelector(`[data-tab="${tabName}"]`).classList.add('border-blue-500', 'text-blue-600');
  document.querySelector(`[data-tab="${tabName}"]`).classList.remove('border-transparent', 'text-gray-500');
}

// ุงูุชููุฆุฉ ุงูุฃูููุฉ
document.addEventListener('DOMContentLoaded', function() {
  showTab('users');
});

// ูุธุงุฆู ุฅุฏุงุฑุฉ ุงููุณุชุฎุฏููู
function editUser(userId) {
  // ููุฏ ุชุนุฏูู ุงููุณุชุฎุฏู
  console.log('ุชุนุฏูู ุงููุณุชุฎุฏู:', userId);
}

function toggleUserStatus(userId, isActive) {
  if (confirm(`ูู ุชุฑูุฏ ${isActive ? 'ุฅููุงู' : 'ุชูุนูู'} ูุฐุง ุงููุณุชุฎุฏูุ`)) {
    // ููุฏ ุชุบููุฑ ุญุงูุฉ ุงููุณุชุฎุฏู
    console.log('ุชุบููุฑ ุญุงูุฉ ุงููุณุชุฎุฏู:', userId, isActive);
  }
}

function deleteUser(userId) {
  if (confirm('ูู ุฃูุช ูุชุฃูุฏ ูู ุญุฐู ูุฐุง ุงููุณุชุฎุฏูุ')) {
    // ููุฏ ุญุฐู ุงููุณุชุฎุฏู
    console.log('ุญุฐู ุงููุณุชุฎุฏู:', userId);
  }
}

// ูุนุงููุฉ ุงูุณูุฉ
function previewTheme(theme) {
  document.body.className = theme;
}
</script>

<style>
.tab-content {
  display: none;
}

.tab-content.active {
  display: block;
  animation: fadeIn 0.3s ease;
}

@keyframes fadeIn {
  from { opacity: 0; transform: translateY(10px); }
  to { opacity: 1; transform: translateY(0); }
}

/* ุชุฎุตูุต ุงูุชุจุฏูู */
input[type="checkbox"]:checked ~ .peer-checked\:bg-blue-600 {
  background-color: #2563eb;
}
</style>
{% endblock %}